{{define "sidebar-content"}}
<!-- Search -->
<div class="panel" id="search-panel">
    <div class="panel-header">
        <h3>üîç –ü–æ–∏—Å–∫</h3>
    </div>
    <div class="panel-body">
        <div class="search-row">
            <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –≥—Ä–∞–Ω–∏—Ü..." autocomplete="off">
            <button id="search-btn">–ù–∞–π—Ç–∏</button>
        </div>
        <div id="search-results"></div>
    </div>
</div>

<!-- Tile Layers -->
<div class="panel" id="layers-panel">
    <div class="panel-header" onclick="togglePanel('layers-panel')">
        <h3>üó∫Ô∏è –°–ª–æ–∏ –∫–∞—Ä—Ç—ã</h3>
        <span class="panel-toggle">‚ñº</span>
    </div>
    <div class="panel-body">
        <!-- Boundaries -->
        <div class="layer-group">
            <label class="layer-toggle">
                <input type="checkbox" id="layer-boundaries" data-layer="boundaries">
                <span class="layer-name">üèõÔ∏è –ì—Ä–∞–Ω–∏—Ü—ã (admin)</span>
            </label>
        </div>

        <!-- Transport -->
        <div class="layer-group">
            <div class="layer-group-title">üöá –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</div>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-transport-metro" data-transport="metro" checked>
                <span class="layer-color" style="background:#d32f2f"></span>
                <span class="layer-name">Metro</span>
            </label>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-transport-bus" data-transport="bus">
                <span class="layer-color" style="background:#388e3c"></span>
                <span class="layer-name">Bus</span>
            </label>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-transport-tram" data-transport="tram">
                <span class="layer-color" style="background:#f57c00"></span>
                <span class="layer-name">Tram</span>
            </label>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-transport-cercania" data-transport="cercania">
                <span class="layer-color" style="background:#7b1fa2"></span>
                <span class="layer-name">Cercan√≠as</span>
            </label>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-transport-long_distance" data-transport="long_distance">
                <span class="layer-color" style="background:#0288d1"></span>
                <span class="layer-name">Long Distance</span>
            </label>
        </div>

        <!-- POI Categories -->
        <div class="layer-group">
            <div class="layer-group-title">üìå POI –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
            <label class="layer-toggle sub">
                <input type="checkbox" data-poi="healthcare">
                <span class="layer-color" style="background:#e53935"></span>
                <span class="layer-name">üè• –ó–¥–æ—Ä–æ–≤—å–µ</span>
            </label>
            <div class="subcategory-list" data-parent="healthcare">
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="pharmacy" data-cat="healthcare" checked>
                    <span class="layer-name">üíä –ê–ø—Ç–µ–∫–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="hospital" data-cat="healthcare" checked>
                    <span class="layer-name">üè• –ë–æ–ª—å–Ω–∏—Ü—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="clinic" data-cat="healthcare">
                    <span class="layer-name">ü©∫ –ö–ª–∏–Ω–∏–∫–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="doctors" data-cat="healthcare">
                    <span class="layer-name">üë®‚Äç‚öïÔ∏è –í—Ä–∞—á–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="dentist" data-cat="healthcare">
                    <span class="layer-name">ü¶∑ –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="veterinary" data-cat="healthcare">
                    <span class="layer-name">üêæ –í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è</span>
                </label>
            </div>

            <label class="layer-toggle sub">
                <input type="checkbox" data-poi="shopping">
                <span class="layer-color" style="background:#ff9800"></span>
                <span class="layer-name">üõí –ú–∞–≥–∞–∑–∏–Ω—ã</span>
            </label>
            <div class="subcategory-list" data-parent="shopping">
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="supermarket" data-cat="shopping" checked>
                    <span class="layer-name">üõí –°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="convenience" data-cat="shopping">
                    <span class="layer-name">üè™ Convenience</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="mall" data-cat="shopping">
                    <span class="layer-name">üè¨ –¢–æ—Ä–≥. —Ü–µ–Ω—Ç—Ä—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="bakery" data-cat="shopping">
                    <span class="layer-name">ü•ñ –ü–µ–∫–∞—Ä–Ω–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="butcher" data-cat="shopping">
                    <span class="layer-name">ü•© –ú—è—Å–Ω—ã–µ</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="greengrocer" data-cat="shopping">
                    <span class="layer-name">ü•¨ –û–≤–æ—â–∏/—Ñ—Ä—É–∫—Ç—ã</span>
                </label>
            </div>

            <label class="layer-toggle sub">
                <input type="checkbox" data-poi="education">
                <span class="layer-color" style="background:#1976d2"></span>
                <span class="layer-name">üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</span>
            </label>
            <div class="subcategory-list" data-parent="education">
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="school" data-cat="education">
                    <span class="layer-name">üè´ –®–∫–æ–ª—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="kindergarten" data-cat="education">
                    <span class="layer-name">üë∂ –î–µ—Ç—Å–∫–∏–µ —Å–∞–¥—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="university" data-cat="education">
                    <span class="layer-name">üéì –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="library" data-cat="education">
                    <span class="layer-name">üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏</span>
                </label>
            </div>

            <label class="layer-toggle sub">
                <input type="checkbox" data-poi="leisure">
                <span class="layer-color" style="background:#43a047"></span>
                <span class="layer-name">üèûÔ∏è –î–æ—Å—É–≥ –∏ —Å–ø–æ—Ä—Ç</span>
            </label>
            <div class="subcategory-list" data-parent="leisure">
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="park" data-cat="leisure" checked>
                    <span class="layer-name">üå≥ –ü–∞—Ä–∫–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="garden" data-cat="leisure">
                    <span class="layer-name">üå∑ –°–∞–¥—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="playground" data-cat="leisure">
                    <span class="layer-name">üé† –ü–ª–æ—â–∞–¥–∫–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="sports_centre" data-cat="leisure" checked>
                    <span class="layer-name">üèãÔ∏è –°–ø–æ—Ä—Ç–∑–∞–ª—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="museum" data-cat="leisure">
                    <span class="layer-name">üèõÔ∏è –ú—É–∑–µ–∏</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="attraction" data-cat="leisure">
                    <span class="layer-name">‚≠ê –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á.</span>
                </label>
            </div>

            <label class="layer-toggle sub">
                <input type="checkbox" data-poi="food_drink">
                <span class="layer-color" style="background:#8d6e63"></span>
                <span class="layer-name">üçΩÔ∏è –ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏</span>
            </label>
            <div class="subcategory-list" data-parent="food_drink">
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="restaurant" data-cat="food_drink">
                    <span class="layer-name">üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="cafe" data-cat="food_drink">
                    <span class="layer-name">‚òï –ö–∞—Ñ–µ</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="bar" data-cat="food_drink">
                    <span class="layer-name">üç∫ –ë–∞—Ä—ã</span>
                </label>
                <label class="layer-toggle subsub">
                    <input type="checkbox" data-poi-sub="fast_food" data-cat="food_drink">
                    <span class="layer-name">üçî –§–∞—Å—Ç-—Ñ—É–¥</span>
                </label>
            </div>
        </div>

        <!-- Environment -->
        <div class="layer-group">
            <div class="layer-group-title">üåç –û–∫—Ä—É–∂–µ–Ω–∏–µ</div>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-green" data-env="green">
                <span class="layer-color" style="background:#4caf50"></span>
                <span class="layer-name">üå≥ –ó–µ–ª—ë–Ω—ã–µ –∑–æ–Ω—ã</span>
            </label>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-water" data-env="water">
                <span class="layer-color" style="background:#2196f3"></span>
                <span class="layer-name">üíß –í–æ–¥–∞</span>
            </label>
            <label class="layer-toggle sub">
                <input type="checkbox" id="layer-beaches" data-env="beaches">
                <span class="layer-color" style="background:#fdd835"></span>
                <span class="layer-name">üèñÔ∏è –ü–ª—è–∂–∏</span>
            </label>
        </div>
    </div>
</div>

<!-- Click results -->
<div class="panel" id="click-panel">
    <div class="panel-header" onclick="togglePanel('click-panel')">
        <h3>üìç –î–∞–Ω–Ω—ã–µ –ø–æ —Ç–æ—á–∫–µ</h3>
        <span class="panel-toggle">‚ñº</span>
    </div>
    <div class="panel-body">
        <div class="click-params">
            <div class="param-row">
                <label>–†–∞–¥–∏—É—Å (–º)</label>
                <input type="number" id="param-radius" value="1000" min="100" max="5000" step="100">
            </div>
            <div class="param-row">
                <label>–õ–∏–º–∏—Ç</label>
                <input type="number" id="param-limit" value="10" min="1" max="50">
            </div>
        </div>
        <p class="hint">–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫–∞—Ä—Ç–µ —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</p>
        <div id="click-results"></div>
    </div>
</div>
{{end}}

{{define "data-sidebar-content"}}
<!-- Sidebar header with toggle -->
<div class="ds-header">
    <h3>üìã –û–±—ä–µ–∫—Ç—ã –≤ –∑–æ–Ω–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏</h3>
    <button id="ds-toggle-btn" class="ds-toggle" title="–°–≤–µ—Ä–Ω—É—Ç—å/—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å">‚óÄ</button>
</div>

<!-- Transport section -->
<div class="ds-section" id="ds-transport-section">
    <div class="ds-section-header" onclick="toggleDSSection('ds-transport-section')">
        <span>üöá –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</span>
        <span class="ds-count" id="ds-transport-count">0</span>
    </div>
    <div class="ds-section-body">
        <div id="ds-transport-list" class="ds-list"></div>
        <div id="ds-transport-loading" class="ds-loading" style="display:none">
            <div class="spinner"></div><span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
        <div id="ds-transport-load-more" class="ds-load-more" style="display:none">
            <button onclick="loadMoreTransport()">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>
        </div>
    </div>
</div>

<!-- POI section -->
<div class="ds-section" id="ds-poi-section">
    <div class="ds-section-header" onclick="toggleDSSection('ds-poi-section')">
        <span>üìå POI</span>
        <span class="ds-count" id="ds-poi-count">0</span>
    </div>
    <div class="ds-section-body">
        <div id="ds-poi-list" class="ds-list"></div>
        <div id="ds-poi-loading" class="ds-loading" style="display:none">
            <div class="spinner"></div><span>–ó–∞–≥—Ä—É–∑–∫–∞...</span>
        </div>
        <div id="ds-poi-load-more" class="ds-load-more" style="display:none">
            <button onclick="loadMorePOI()">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë</button>
        </div>
    </div>
</div>
{{end}}
